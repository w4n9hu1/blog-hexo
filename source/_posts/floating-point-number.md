---
title: 什么是浮点数
description: 为什么会有误差，什么是浮点数？
categories:
  - 101
tags:
  - CS
date: 2022-12-10 20:26:23
---
{% asset_img 1.png %}

## 计算机怎么表示整数？

计算机通常使用二进制来表示整数。在二进制中，整数由一串 0 和 1 组成，其中每一位都代表整数的一个值。

例如，假设我们要在计算机中表示整数 25。我们可以将 25 转换成二进制，得到 11001。

为了更好地理解，我们可以将二进制数的每一位与它所代表的值对应起来。例如，对于二进制数 11001，我们可以将它分解成下面这样：
``` C#
1 * 2^4 + 1 * 2^3 + 0 * 2^2 + 0 * 2^1 + 1 * 2^0
```
通过将二进制数的每一位与它所代表的值相乘，我们就可以得到原来的整数。因此，上面这个例子中，二进制数 11001 就表示十进制数 25。

不同的计算机系统可能会采用不同的方式来表示整数，例如 32 位系统和 64 位系统就有不同的整数表示方式。

## 计算机怎么表示小数？

计算机通常使用浮点数来表示小数。浮点数是一种近似值表示方法，它可以通过指数和尾数的方式来表示一个小数。
假设我们要在计算机中表示小数 0.125。我们可以将 0.125 转换成二进制，得到 0.001。
为了更好地理解，我们可以将二进制数的每一位与它所代表的值对应起来。例如，对于二进制数 0.001，我们可以将它分解成下面这样：
``` C#
0.001 = 0 * 2^-1 + 0 * 2^-2 + 1 * 2^-3
```
通过将二进制数的每一位与它所代表的值相乘，我们就可以得到原来的小数。因此，上面这个例子中，二进制数 0.001 就表示十进制小数 0.125。

## 为什么0.1+0.2=0.30000000000000004？

0.1 怎么用二进制表示？由于 0.1 无法用二进制精确表示。不过，我们可以将 0.1 近似地表示为二进制数 0.00011001100110011001100110011001100110011001100110011...，其中前面的 0.00011 是 0.1 的近似值。
在计算机中，这个近似值通常会被精确地保存下来，以便在进行浮点运算时使用。由于二进制数有限位数，因此无论怎样近似，都不可能完全精确地表示 0.1。这也是为什么在计算机中执行浮点运算时，结果可能会存在一些误差。

## More

1. [0.30000000000000004.com](https://0.30000000000000004.com/#csharp)
2. [Is floating point math broken?](https://stackoverflow.com/questions/588004/is-floating-point-math-broken/588014#588014)

> 本文由ChatGPT完成。